/*global describe, expect, it*/
'use strict';

var ipc = require('../../../../node-ipc');

describe('TCP Socket verification of client', function TCPClientSpec() {
    it('Verify retry attempts by TCP client to connect to the server as per the value set in "maxRetries" parameter.', function testIt(done) {
        ipc.config.id = 'testClient';
        ipc.config.retry = 600;
        ipc.config.maxRetries = 3;
        ipc.config.stopRetrying = false;

        //set to -1 because there is an error on the first fail
        //before retrying
        var errorCount = -1;

        ipc.connectToNet('tcpFakeServer', 8002, function open() {
            ipc.of.tcpFakeServer.on('error', function gotError(err) {
                errorCount++;
                expect(ipc.of.tcpFakeServer.retriesRemaining).toBe(ipc.config.maxRetries - errorCount);
                expect(err).toBeDefined();
            });
        });

        setTimeout(function testDelay() {
            expect(errorCount).toBe(ipc.config.maxRetries);
            ipc.disconnect('tcpFakeServer');
            done();
        }, ipc.config.retry * ipc.config.maxRetries + ipc.config.retry + ipc.config.retry);
    });

    it('Verify TCP client does not connect to the TCPserver when "stopRetrying" value is set to true.', function testIt(done) {
        ipc.config.maxRetries = 3;
        ipc.config.stopRetrying = true;
        ipc.silent = true;

        //set to -1 because there is an error on the first fail
        //before retrying
        var errorCount = -1;

        ipc.connectToNet('tcpFakeServer', 8002, function open() {
            ipc.of.tcpFakeServer.on('error', function gotError(err) {
                expect(ipc.of.tcpFakeServer.retriesRemaining).toBe(ipc.config.maxRetries);
                expect(err).toBeDefined();
                errorCount++;
            });
        });

        setTimeout(function testDelay() {
            expect(errorCount).toBe(0);
            expect(ipc.of.tcpFakeServer.retriesRemaining).toBe(ipc.config.maxRetries);
            ipc.disconnect('tcpFakeServer');
            done();
        }, ipc.config.retry * ipc.config.maxRetries);
    });

    it('Verify TCP client connects to server named "tcpServer" and receives message.', function testIt(done) {
        ipc.connectToNet('tcpServer', 8300, function open() {
            ipc.of.tcpServer.on('connect', function connected() {
                ipc.of.tcpServer.on('message', function gotMessage(data) {
                    expect(data.id).toBe('tcpServer');
                    expect(data.message).toBe('I am TCP server!');
                    testDone();
                });

                ipc.of.tcpServer.emit('message', {
                    id: ipc.config.id,
                    message: 'Hello from testClient.'
                });
            });

            ipc.of.tcpServer.on('error', function testError(err) {
                expect(err).toBe(false);
                testDone();
            });
        });

        function testDone() {
            ipc.disconnect('tcpServer');
            done();
        }
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL25vZGUtaXBjL3NwZWMvc3VwcG9ydC9qYXNtaW5lVGVzdC9UQ1AvdGNwU29ja2V0Q2xpZW50LnNwZWMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBOztBQUVBLElBQU0sTUFBTSxRQUFRLHNCQUFSLENBQU47O0FBRU4sU0FBUyxtQ0FBVCxFQUNJLFNBQVMsYUFBVCxHQUF3QjtBQUNwQixPQUNJLDhHQURKLEVBRUksU0FBUyxNQUFULENBQWdCLElBQWhCLEVBQXFCO0FBQ2pCLFlBQUksTUFBSixDQUFXLEVBQVgsR0FBZSxZQUFmLENBRGlCO0FBRWpCLFlBQUksTUFBSixDQUFXLEtBQVgsR0FBbUIsR0FBbkIsQ0FGaUI7QUFHakIsWUFBSSxNQUFKLENBQVcsVUFBWCxHQUF3QixDQUF4QixDQUhpQjtBQUlqQixZQUFJLE1BQUosQ0FBVyxZQUFYLEdBQTBCLEtBQTFCOzs7O0FBSmlCLFlBUWIsYUFBVyxDQUFDLENBQUQsQ0FSRTs7QUFVakIsWUFBSSxZQUFKLENBQ0ksZUFESixFQUVJLElBRkosRUFHSSxTQUFTLElBQVQsR0FBZTtBQUNYLGdCQUFJLEVBQUosQ0FBTyxhQUFQLENBQXFCLEVBQXJCLENBQ0ksT0FESixFQUVJLFNBQVMsUUFBVCxDQUFrQixHQUFsQixFQUFzQjtBQUNsQiw2QkFEa0I7QUFFbEIsdUJBQU8sSUFBSSxFQUFKLENBQU8sYUFBUCxDQUFxQixnQkFBckIsQ0FBUCxDQUE4QyxJQUE5QyxDQUNJLElBQUksTUFBSixDQUFXLFVBQVgsR0FBc0IsVUFBdEIsQ0FESixDQUZrQjtBQUtsQix1QkFBTyxHQUFQLEVBQVksV0FBWixHQUxrQjthQUF0QixDQUZKLENBRFc7U0FBZixDQUhKLENBVmlCOztBQTJCakIsbUJBQ0ksU0FBUyxTQUFULEdBQW9CO0FBQ2hCLG1CQUFPLFVBQVAsRUFBbUIsSUFBbkIsQ0FBd0IsSUFBSSxNQUFKLENBQVcsVUFBWCxDQUF4QixDQURnQjtBQUVoQixnQkFBSSxVQUFKLENBQWUs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SiIsImZpbGUiOiJ0Y3BTb2NrZXRDbGllbnQuc3BlYy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qZ2xvYmFsIGRlc2NyaWJlLCBleHBlY3QsIGl0Ki9cbid1c2Ugc3RyaWN0JztcblxuY29uc3QgaXBjID0gcmVxdWlyZSgnLi4vLi4vLi4vLi4vbm9kZS1pcGMnKTtcblxuZGVzY3JpYmUoJ1RDUCBTb2NrZXQgdmVyaWZpY2F0aW9uIG9mIGNsaWVudCcsXG4gICAgZnVuY3Rpb24gVENQQ2xpZW50U3BlYygpe1xuICAgICAgICBpdChcbiAgICAgICAgICAgICdWZXJpZnkgcmV0cnkgYXR0ZW1wdHMgYnkgVENQIGNsaWVudCB0byBjb25uZWN0IHRvIHRoZSBzZXJ2ZXIgYXMgcGVyIHRoZSB2YWx1ZSBzZXQgaW4gXCJtYXhSZXRyaWVzXCIgcGFyYW1ldGVyLicsXG4gICAgICAgICAgICBmdW5jdGlvbiB0ZXN0SXQoZG9uZSl7XG4gICAgICAgICAgICAgICAgaXBjLmNvbmZpZy5pZCA9J3Rlc3RDbGllbnQnO1xuICAgICAgICAgICAgICAgIGlwYy5jb25maWcucmV0cnkgPSA2MDA7XG4gICAgICAgICAgICAgICAgaXBjLmNvbmZpZy5tYXhSZXRyaWVzID0gMztcbiAgICAgICAgICAgICAgICBpcGMuY29uZmlnLnN0b3BSZXRyeWluZyA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgLy9zZXQgdG8gLTEgYmVjYXVzZSB0aGVyZSBpcyBhbiBlcnJvciBvbiB0aGUgZmlyc3QgZmFpbFxuICAgICAgICAgICAgICAgIC8vYmVmb3JlIHJldHJ5aW5nXG4gICAgICAgICAgICAgICAgbGV0IGVycm9yQ291bnQ9LTE7XG5cbiAgICAgICAgICAgICAgICBpcGMuY29ubmVjdFRvTmV0KFxuICAgICAgICAgICAgICAgICAgICAndGNwRmFrZVNlcnZlcicsXG4gICAgICAgICAgICAgICAgICAgIDgwMDIsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9wZW4oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlwYy5vZi50Y3BGYWtlU2VydmVyLm9uKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdlcnJvcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZ290RXJyb3IoZXJyKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JDb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBlY3QoaXBjLm9mLnRjcEZha2VTZXJ2ZXIucmV0cmllc1JlbWFpbmluZykudG9CZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlwYy5jb25maWcubWF4UmV0cmllcy1lcnJvckNvdW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdChlcnIpLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB0ZXN0RGVsYXkoKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdChlcnJvckNvdW50KS50b0JlKGlwYy5jb25maWcubWF4UmV0cmllcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpcGMuZGlzY29ubmVjdCgndGNwRmFrZVNlcnZlcicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBpcGMuY29uZmlnLnJldHJ5KmlwYy5jb25maWcubWF4UmV0cmllcyArXG4gICAgICAgICAgICAgICAgICAgIGlwYy5jb25maWcucmV0cnkraXBjLmNvbmZpZy5yZXRyeVxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICBpdChcbiAgICAgICAgICAgICdWZXJpZnkgVENQIGNsaWVudCBkb2VzIG5vdCBjb25uZWN0IHRvIHRoZSBUQ1BzZXJ2ZXIgd2hlbiBcInN0b3BSZXRyeWluZ1wiIHZhbHVlIGlzIHNldCB0byB0cnVlLicsXG4gICAgICAgICAgICBmdW5jdGlvbiB0ZXN0SXQoZG9uZSl7XG4gICAgICAgICAgICAgICAgaXBjLmNvbmZpZy5tYXhSZXRyaWVzID0gMztcbiAgICAgICAgICAgICAgICBpcGMuY29uZmlnLnN0b3BSZXRyeWluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgaXBjLnNpbGVudD10cnVlO1xuXG4gICAgICAgICAgICAgICAgLy9zZXQgdG8gLTEgYmVjYXVzZSB0aGVyZSBpcyBhbiBlcnJvciBvbiB0aGUgZmlyc3QgZmFpbFxuICAgICAgICAgICAgICAgIC8vYmVmb3JlIHJldHJ5aW5nXG4gICAgICAgICAgICAgICAgbGV0IGVycm9yQ291bnQ9LTE7XG5cbiAgICAgICAgICAgICAgICBpcGMuY29ubmVjdFRvTmV0KFxuICAgICAgICAgICAgICAgICAgICAndGNwRmFrZVNlcnZlcicsXG4gICAgICAgICAgICAgICAgICAgIDgwMDIsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9wZW4oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlwYy5vZi50Y3BGYWtlU2VydmVyLm9uKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdlcnJvcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZ290RXJyb3IoZXJyKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KGlwYy5vZi50Y3BGYWtlU2VydmVyLnJldHJpZXNSZW1haW5pbmcpLnRvQmUoaXBjLmNvbmZpZy5tYXhSZXRyaWVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KGVycikudG9CZURlZmluZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JDb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gdGVzdERlbGF5KCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3QoZXJyb3JDb3VudCkudG9CZSgwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdChpcGMub2YudGNwRmFrZVNlcnZlci5yZXRyaWVzUmVtYWluaW5nKS50b0JlKGlwYy5jb25maWcubWF4UmV0cmllcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpcGMuZGlzY29ubmVjdCgndGNwRmFrZVNlcnZlcicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBpcGMuY29uZmlnLnJldHJ5KmlwYy5jb25maWcubWF4UmV0cmllc1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG5cbiAgICAgICAgaXQoXG4gICAgICAgICAgICAnVmVyaWZ5IFRDUCBjbGllbnQgY29ubmVjdHMgdG8gc2VydmVyIG5hbWVkIFwidGNwU2VydmVyXCIgYW5kIHJlY2VpdmVzIG1lc3NhZ2UuJyxcbiAgICAgICAgICAgIGZ1bmN0aW9uIHRlc3RJdChkb25lKXtcbiAgICAgICAgICAgICAgICBpcGMuY29ubmVjdFRvTmV0KFxuICAgICAgICAgICAgICAgICAgICAndGNwU2VydmVyJyxcbiAgICAgICAgICAgICAgICAgICAgODMwMCxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gb3Blbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgaXBjLm9mLnRjcFNlcnZlci5vbihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY29ubmVjdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gY29ubmVjdGVkKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlwYy5vZi50Y3BTZXJ2ZXIub24oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWVzc2FnZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBnb3RNZXNzYWdlKGRhdGEpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdChkYXRhLmlkKS50b0JlKCd0Y3BTZXJ2ZXInKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBlY3QoZGF0YS5tZXNzYWdlKS50b0JlKCdJIGFtIFRDUCBzZXJ2ZXIhJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVzdERvbmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpcGMub2YudGNwU2VydmVyLmVtaXQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWVzc2FnZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQgICAgICA6IGlwYy5jb25maWcuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA6ICdIZWxsbyBmcm9tIHRlc3RDbGllbnQuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlwYy5vZi50Y3BTZXJ2ZXIub24oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB0ZXN0RXJyb3IoZXJyKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KGVycikudG9CZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlc3REb25lKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiB0ZXN0RG9uZSgpe1xuICAgICAgICAgICAgICAgICAgICBpcGMuZGlzY29ubmVjdCgndGNwU2VydmVyJyk7XG4gICAgICAgICAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuKTtcbiJdfQ==