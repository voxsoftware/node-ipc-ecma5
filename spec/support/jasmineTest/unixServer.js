'use strict';

var ipc = require('../../../node-ipc');
var process = require('process');
var dieAfter = 30000;

//die after 60 seconds
setTimeout(function killServerProcess() {
    process.exit(0);
}, dieAfter);

ipc.config.id = 'unixServer';
ipc.config.retry = 1500;
ipc.config.silent = true;

ipc.serve(function serverStarted() {
    ipc.server.on('message', function gotMessage(data, socket) {
        ipc.server.emit(socket, 'message', {
            id: ipc.config.id,
            message: 'I am unix server!'
        });
    });
});

ipc.server.start();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL25vZGUtaXBjL3NwZWMvc3VwcG9ydC9qYXNtaW5lVGVzdC91bml4U2VydmVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLElBQU0sTUFBSSxRQUFRLG1CQUFSLENBQUo7QUFDTixJQUFNLFVBQVEsUUFBUSxTQUFSLENBQVI7QUFDTixJQUFNLFdBQVMsS0FBVDs7O0FBR04sV0FDSSxTQUFTLGlCQUFULEdBQTRCO0FBQ3hCLFlBQVEsSUFBUixDQUFhLENBQWIsRUFEd0I7Q0FBNUIsRUFHQSxRQUpKOztBQU9BLElBQUksTUFBSixDQUFXLEVBQVgsR0FBZ0IsWUFBaEI7QUFDQSxJQUFJLE1BQUosQ0FBVyxLQUFYLEdBQWtCLElBQWxCO0FBQ0EsSUFBSSxNQUFKLENBQVcsTUFBWCxHQUFrQixJQUFsQjs7QUFFQSxJQUFJLEtBQUosQ0FDSSxTQUFTLGFBQVQsR0FBd0I7QUFDcEIsUUFBSSxNQUFKLENBQVcsRUFBWCxDQUNJLFNBREosRUFFSSxTQUFTLFVBQVQsQ0FBb0IsSUFBcEIsRUFBeUIsTUFBekIsRUFBZ0M7QUFDNUIsWUFBSSxNQUFKLENBQVcsSUFBWCxDQUNJLE1BREosRUFFSSxTQUZKLEVBR0k7QUFDSSxnQkFBVSxJQUFJLE1BQUosQ0FBVyxFQUFYO0FBQ1YscUJBQVUsbUJBQVY7U0FMUixFQUQ0QjtLQUFoQyxDQUZKLENBRG9CO0NBQXhCLENBREo7O0FBbUJBLElBQUksTUFBSixDQUFXLEtBQVgiLCJmaWxlIjoidW5peFNlcnZlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgaXBjPXJlcXVpcmUoJy4uLy4uLy4uL25vZGUtaXBjJyk7XG5jb25zdCBwcm9jZXNzPXJlcXVpcmUoJ3Byb2Nlc3MnKTtcbmNvbnN0IGRpZUFmdGVyPTMwMDAwO1xuXG4vL2RpZSBhZnRlciA2MCBzZWNvbmRzXG5zZXRUaW1lb3V0KFxuICAgIGZ1bmN0aW9uIGtpbGxTZXJ2ZXJQcm9jZXNzKCl7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgwKTtcbiAgICB9LFxuICAgIGRpZUFmdGVyXG4pO1xuXG5pcGMuY29uZmlnLmlkID0gJ3VuaXhTZXJ2ZXInO1xuaXBjLmNvbmZpZy5yZXRyeT0gMTUwMDtcbmlwYy5jb25maWcuc2lsZW50PXRydWU7XG5cbmlwYy5zZXJ2ZShcbiAgICBmdW5jdGlvbiBzZXJ2ZXJTdGFydGVkKCl7XG4gICAgICAgIGlwYy5zZXJ2ZXIub24oXG4gICAgICAgICAgICAnbWVzc2FnZScsXG4gICAgICAgICAgICBmdW5jdGlvbiBnb3RNZXNzYWdlKGRhdGEsc29ja2V0KXtcbiAgICAgICAgICAgICAgICBpcGMuc2VydmVyLmVtaXQoXG4gICAgICAgICAgICAgICAgICAgIHNvY2tldCxcbiAgICAgICAgICAgICAgICAgICAgJ21lc3NhZ2UnLFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZCAgICAgIDogaXBjLmNvbmZpZy5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgOiAnSSBhbSB1bml4IHNlcnZlciEnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cbik7XG5cblxuaXBjLnNlcnZlci5zdGFydCgpO1xuIl19