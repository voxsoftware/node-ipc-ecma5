'use strict';

var ipc = require('../../../node-ipc');
var process = require('process');
var dieAfter = 30000;

//die after 60 seconds
setTimeout(function killServerProcess() {
    process.exit(0);
}, dieAfter);

ipc.config.id = 'tcpServer';
ipc.config.retry = 1500;
ipc.config.networkPort = 8300;
ipc.config.silent = true;

ipc.serveNet(function serverStarted() {
    ipc.server.on('message', function gotMessage(data, socket) {
        ipc.server.emit(socket, 'message', {
            id: ipc.config.id,
            message: 'I am TCP server!'
        });
    });
});

ipc.server.start();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL25vZGUtaXBjL3NwZWMvc3VwcG9ydC9qYXNtaW5lVGVzdC90Y3BTZXJ2ZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsSUFBTSxNQUFJLFFBQVEsbUJBQVIsQ0FBSjtBQUNOLElBQU0sVUFBUSxRQUFRLFNBQVIsQ0FBUjtBQUNOLElBQU0sV0FBUyxLQUFUOzs7QUFHTixXQUNJLFNBQVMsaUJBQVQsR0FBNEI7QUFDeEIsWUFBUSxJQUFSLENBQWEsQ0FBYixFQUR3QjtDQUE1QixFQUdBLFFBSko7O0FBT0EsSUFBSSxNQUFKLENBQVcsRUFBWCxHQUFnQixXQUFoQjtBQUNBLElBQUksTUFBSixDQUFXLEtBQVgsR0FBa0IsSUFBbEI7QUFDQSxJQUFJLE1BQUosQ0FBVyxXQUFYLEdBQXVCLElBQXZCO0FBQ0EsSUFBSSxNQUFKLENBQVcsTUFBWCxHQUFrQixJQUFsQjs7QUFFQSxJQUFJLFFBQUosQ0FDSSxTQUFTLGFBQVQsR0FBd0I7QUFDcEIsUUFBSSxNQUFKLENBQVcsRUFBWCxDQUNJLFNBREosRUFFSSxTQUFTLFVBQVQsQ0FBb0IsSUFBcEIsRUFBeUIsTUFBekIsRUFBZ0M7QUFDNUIsWUFBSSxNQUFKLENBQVcsSUFBWCxDQUNJLE1BREosRUFFSSxTQUZKLEVBR0k7QUFDSSxnQkFBVSxJQUFJLE1BQUosQ0FBVyxFQUFYO0FBQ1YscUJBQVUsa0JBQVY7U0FMUixFQUQ0QjtLQUFoQyxDQUZKLENBRG9CO0NBQXhCLENBREo7O0FBa0JBLElBQUksTUFBSixDQUFXLEtBQVgiLCJmaWxlIjoidGNwU2VydmVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBpcGM9cmVxdWlyZSgnLi4vLi4vLi4vbm9kZS1pcGMnKTtcbmNvbnN0IHByb2Nlc3M9cmVxdWlyZSgncHJvY2VzcycpO1xuY29uc3QgZGllQWZ0ZXI9MzAwMDA7XG5cbi8vZGllIGFmdGVyIDYwIHNlY29uZHNcbnNldFRpbWVvdXQoXG4gICAgZnVuY3Rpb24ga2lsbFNlcnZlclByb2Nlc3MoKXtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDApO1xuICAgIH0sXG4gICAgZGllQWZ0ZXJcbik7XG5cbmlwYy5jb25maWcuaWQgPSAndGNwU2VydmVyJztcbmlwYy5jb25maWcucmV0cnk9IDE1MDA7XG5pcGMuY29uZmlnLm5ldHdvcmtQb3J0PTgzMDA7XG5pcGMuY29uZmlnLnNpbGVudD10cnVlO1xuXG5pcGMuc2VydmVOZXQoXG4gICAgZnVuY3Rpb24gc2VydmVyU3RhcnRlZCgpe1xuICAgICAgICBpcGMuc2VydmVyLm9uKFxuICAgICAgICAgICAgJ21lc3NhZ2UnLFxuICAgICAgICAgICAgZnVuY3Rpb24gZ290TWVzc2FnZShkYXRhLHNvY2tldCl7XG4gICAgICAgICAgICAgICAgaXBjLnNlcnZlci5lbWl0KFxuICAgICAgICAgICAgICAgICAgICBzb2NrZXQsXG4gICAgICAgICAgICAgICAgICAgICdtZXNzYWdlJyxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQgICAgICA6IGlwYy5jb25maWcuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlIDogJ0kgYW0gVENQIHNlcnZlciEnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cbik7XG5cbmlwYy5zZXJ2ZXIuc3RhcnQoKTtcbiJdfQ==